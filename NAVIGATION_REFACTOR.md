# 导航栏重构说明

## 改动概述

本次重构将导航栏提取为全局布局组件，确保在所有主要页面保持一致的导航体验。

## 主要变更

### 1. 新增文件

#### `frontend/src/layouts/MainLayout.vue`
- **用途**: 全局主布局组件，包含导航栏和页脚
- **特性**:
  - 响应式导航菜单
  - 用户登录状态显示
  - 自动高亮当前路由
  - Sticky 定位（滚动时固定在顶部）

#### `frontend/src/views/Contribution.vue`
- **用途**: 独立的贡献榜页面
- **功能**:
  - 用户排行榜（支持按贡献分、等级排序）
  - 分页功能
  - 统计信息（总用户数、总贡献分、平均等级）
  - 前三名特殊徽章显示（金银铜）

#### `frontend/src/views/About.vue`
- **用途**: 关于页面（简单占位）

### 2. 修改文件

#### `frontend/src/router/index.ts`
- **改动**: 使用嵌套路由结构
- **变化**:
  ```typescript
  // 旧结构：每个路由独立
  { path: '/', component: Home }
  { path: '/recipes', component: RecipeList }
  
  // 新结构：使用 MainLayout 包裹
  {
    path: '/',
    component: MainLayout,
    children: [
      { path: '', component: Home },
      { path: '/recipes', component: RecipeList },
      { path: '/contribution', component: Contribution }, // 新增
      // ... 其他路由
    ]
  }
  ```

#### `frontend/src/views/Home.vue`
- **移除**: 导航栏、页脚、贡献榜部分
- **新增**: 最新配方列表
- **保留**: Hero 横幅、搜索框、统计信息

#### `frontend/src/views/RecipeList.vue`
- **改动**: 移除独立的导航栏，简化为纯内容页面
- **样式**: 更新为与整体布局一致的样式

#### `frontend/src/views/TaskBoard.vue`
- **改动**: 从占位符更新为带样式的空状态页面

#### `frontend/src/views/Import.vue`
- **改动**: 从占位符更新为完整的导入表单界面

## 导航栏菜单项

### 当前菜单结构

| 菜单项 | 路由 | 显示条件 |
|--------|------|----------|
| 首页 | `/` | 始终显示 |
| 配方列表 | `/recipes` | 始终显示 |
| 任务大厅 | `/tasks` | 始终显示 |
| 导入配方 | `/import` | 已登录用户 |
| 贡献榜 | `/contribution` | 始终显示 |
| 管理后台 | `/admin` | 管理员 |

### 用户菜单（右上角）

**未登录状态**:
- 登录按钮
- 注册按钮

**已登录状态**:
- 用户名 + 等级显示
- 下拉菜单:
  - 个人中心
  - 退出登录

## 技术细节

### 布局结构

```
MainLayout.vue (全局布局)
├── Header (导航栏 - sticky 定位)
│   ├── Logo
│   ├── Navigation Menu
│   └── User Actions
├── Main Content (router-view)
│   └── 各个页面组件
└── Footer (页脚)
```

### 样式规范

- **最大宽度**: 1400px (内容区域)
- **间距**: 30px 上下边距，20px 左右内边距
- **背景色**: #f5f7fa (全局背景)
- **卡片背景**: white
- **主色调**: #409eff (Element Plus 默认蓝)

### 响应式设计

- 导航栏使用 Flexbox 布局
- Logo、菜单、用户操作区合理分配空间
- 菜单项自适应收缩

## 页面改进

### 首页 (Home.vue)

**之前**: 包含导航栏、贡献榜、页脚
**现在**: 
- Hero 横幅（搜索框、路径查找）
- 统计信息（4个卡片）
- **最新配方列表**（新增，显示最近10条配方）

### 贡献榜 (Contribution.vue - 新增)

**功能**:
- 完整的用户排行榜
- 支持按贡献分/等级排序
- 分页显示（每页20条，可调整）
- 前三名特殊徽章（🥇🥈🥉）
- 统计卡片（总用户、总贡献、平均等级）

### 配方列表 (RecipeList.vue)

**改进**:
- 移除冗余的导航栏代码
- 统一页面样式
- 改进搜索框（添加搜索按钮）
- 支持页面大小切换 (10/20/50/100)

### 任务大厅 (TaskBoard.vue)

**改进**: 从简单占位符升级为带样式的空状态页面

### 导入配方 (Import.vue)

**改进**:
- 完整的表单界面
- 支持文本/文件两种导入方式
- 拖拽上传支持
- 格式说明提示

## 热重载兼容性

所有改动均兼容 Vite HMR，无需手动重启前端服务器。文件保存后自动生效。

## 待办事项

- [ ] 完善导入配方功能（调用后端 API）
- [ ] 实现任务大厅功能
- [ ] 个人中心页面完善
- [ ] 配方详情页面实现
- [ ] 管理后台页面实现

## 测试建议

1. **导航栏测试**:
   - 在各个页面切换，确认导航栏始终显示
   - 测试登录/登出后菜单项变化
   - 验证当前路由高亮显示

2. **贡献榜测试**:
   - 测试排序功能
   - 测试分页功能
   - 验证统计数据正确性

3. **首页测试**:
   - 确认最新配方列表显示
   - 测试搜索和路径查找功能
   - 验证统计信息加载

4. **响应式测试**:
   - 不同屏幕宽度下导航栏布局
   - 移动端兼容性（需要后续优化）

## 注意事项

⚠️ **重要**: 
- 本次改动使用嵌套路由，`Login.vue` 和 `Register.vue` 不使用 MainLayout（保持独立页面）
- 404 页面也不使用 MainLayout
- 所有样式改动无需重启服务器，Vite HMR 会自动更新
