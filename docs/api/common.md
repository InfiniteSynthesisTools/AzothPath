# 通用信息

**基础URL：** `http://localhost:19198`  
**项目名称：** Azoth Path - 无尽合成工具站

---

## 通用响应格式

所有API响应都遵循以下格式：

```json
{
  "code": 200,
  "message": "操作成功",
  "data": { ... }
}
```

### 状态码说明
- `200`: 成功
- `201`: 创建成功
- `400`: 请求参数错误
- `401`: 未授权
- `403`: 权限不足
- `404`: 资源不存在
- `500`: 服务器内部错误

---

## 认证说明

### JWT认证
大部分API需要JWT认证，在请求头中添加：

```
Authorization: Bearer <your_jwt_token>
```

### 用户权限级别
- `auth = 1`: 普通用户
- `auth = 9`: 管理员

### Token获取
通过 `POST /api/users/login` 获取token，在登录成功的响应中获得。

---

## 错误处理

### 常见错误码

#### 400 - 请求参数错误
- 用户名或密码为空
- 配方参数不完整
- 物品名称长度超限
- 字符白名单验证失败

#### 401 - 未授权
- Token无效或过期
- 用户名或密码错误

#### 403 - 权限不足
- 需要管理员权限
- 没有权限查看资源

#### 404 - 资源不存在
- 用户不存在
- 配方不存在
- 任务不存在

#### 500 - 服务器内部错误
- 数据库连接失败
- 系统错误

### 错误响应示例

```json
{
  "code": 400,
  "message": "用户名和密码不能为空"
}
```

---

## 限流策略

系统实现了多级限流保护：

1. **严格限流**: 配方提交等敏感操作
2. **一般限流**: 点赞、任务创建等操作
3. **任务创建限流**: 任务创建专用限流
4. **验证限流**: 批量导入验证专用限流

---

## 数据格式说明

### 时间格式
所有时间字段都使用UTC+8时区，格式为ISO 8601：
```
2025-10-19T13:31:20.248Z
```

### 分页格式
所有分页接口都使用统一格式：
```json
{
  "data": [...],
  "total": 100,
  "page": 1,
  "limit": 20
}
```

### 配方格式
批量导入配方支持以下格式：
```
A+B=C
物品A+物品B=结果物品
```

---

## 数据库信息

- **数据库类型**: SQLite (WAL 模式)
- **时区**: UTC+8 (Asia/Shanghai)
- **认证方式**: Bearer Token (JWT)

---

## 快速测试

### 健康检查
```bash
curl http://localhost:19198/api/health
```

### 获取API信息
```bash
curl http://localhost:19198/api
```

### 用户登录示例
```bash
curl -X POST http://localhost:19198/api/users/login \
  -H "Content-Type: application/json" \
  -d '{"username": "admin", "password": "admin123"}'
```

---

## 相关文档

- [API文档首页](README.md)
- [系统健康检查](health.md)
- [用户管理](users.md)
- [配方管理](recipes.md)
- [任务管理](tasks.md)
- [批量导入](imports.md)
- [物品管理](items.md)
- [标签管理](tags.md)
- [系统监控](system.md)
