# ä»»åŠ¡ç®¡ç† API

**åŸºç¡€URLï¼š** `http://localhost:19198`  
**æ¨¡å—ï¼š** ä»»åŠ¡ç®¡ç†

---

## è·å–ä»»åŠ¡åˆ—è¡¨

### GET /api/tasks

è·å–ä»»åŠ¡åˆ—è¡¨

#### è¯·æ±‚ä¿¡æ¯
- **æ–¹æ³•ï¼š** GET
- **è·¯å¾„ï¼š** `/api/tasks`
- **è®¤è¯ï¼š** æ— éœ€è®¤è¯
- **ç¤ºä¾‹é“¾æ¥ï¼š** [http://localhost:19198/api/tasks](http://localhost:19198/api/tasks)

#### æŸ¥è¯¢å‚æ•°
- `page`: é¡µç 
- `limit`: æ¯é¡µæ•°é‡
- `status`: ä»»åŠ¡çŠ¶æ€ï¼ˆactive, completedï¼‰
- `sortBy`: æ’åºå­—æ®µï¼ˆcreated_at, prizeï¼‰
- `sortOrder`: æ’åºé¡ºåºï¼ˆasc, descï¼‰

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "tasks": [
      {
        "id": 1,
        "item_name": "é’»çŸ³",
        "prize": 100,
        "status": "active",
        "created_at": "2025-10-19T13:31:20.248Z",
        "completed_at": null
      }
    ],
    "total": 10,
    "page": 1,
    "limit": 20
  }
}
```

---

## è·å–ä»»åŠ¡ç»Ÿè®¡

### GET /api/tasks/stats

è·å–ä»»åŠ¡ç»Ÿè®¡

#### è¯·æ±‚ä¿¡æ¯
- **æ–¹æ³•ï¼š** GET
- **è·¯å¾„ï¼š** `/api/tasks/stats`
- **è®¤è¯ï¼š** æ— éœ€è®¤è¯
- **ç¤ºä¾‹é“¾æ¥ï¼š** [http://localhost:19198/api/tasks/stats](http://localhost:19198/api/tasks/stats)

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "total": 100,
    "active": 50,
    "completed": 50,
    "total_prize": 5000
  }
}
```

---

## è·å–ä»»åŠ¡è¯¦æƒ…

### GET /api/tasks/:id

è·å–ä»»åŠ¡è¯¦æƒ…

#### è¯·æ±‚ä¿¡æ¯
- **æ–¹æ³•ï¼š** GET
- **è·¯å¾„ï¼š** `/api/tasks/:id`
- **è®¤è¯ï¼š** æ— éœ€è®¤è¯
- **ç¤ºä¾‹é“¾æ¥ï¼š** [http://localhost:19198/api/tasks/1](http://localhost:19198/api/tasks/1)

#### è·¯å¾„å‚æ•°
- `id`: ä»»åŠ¡ID

---

## åˆ›å»ºä»»åŠ¡

### POST /api/tasks

åˆ›å»ºä»»åŠ¡ï¼ˆéœ€è¦è®¤è¯ï¼‰

#### è¯·æ±‚ä¿¡æ¯
- **æ–¹æ³•ï¼š** POST
- **è·¯å¾„ï¼š** `/api/tasks`
- **è®¤è¯ï¼š** Bearer Token
- **ç¤ºä¾‹é“¾æ¥ï¼š** [http://localhost:19198/api/tasks](http://localhost:19198/api/tasks)

#### è¯·æ±‚å‚æ•°
```json
{
  "itemName": "string",  // ç‰©å“åç§°
  "prize": 100          // å¥–åŠ±åˆ†æ•°ï¼ˆæ™®é€šç”¨æˆ·è‡ªåŠ¨ä¸º0ï¼Œç®¡ç†å‘˜å¯è®¾ç½®0-200ï¼‰
}
```

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 201,
  "message": "ä»»åŠ¡åˆ›å»ºæˆåŠŸ",
  "data": {
    "taskId": 1
  }
}
```

---

## å®Œæˆä»»åŠ¡

### POST /api/tasks/:id/complete

å®Œæˆä»»åŠ¡ï¼ˆéœ€è¦è®¤è¯ï¼‰

#### è¯·æ±‚ä¿¡æ¯
- **æ–¹æ³•ï¼š** POST
- **è·¯å¾„ï¼š** `/api/tasks/:id/complete`
- **è®¤è¯ï¼š** Bearer Token
- **ç¤ºä¾‹é“¾æ¥ï¼š** [http://localhost:19198/api/tasks/1/complete](http://localhost:19198/api/tasks/1/complete)

#### è·¯å¾„å‚æ•°
- `id`: ä»»åŠ¡ID

#### è¯·æ±‚å‚æ•°
```json
{
  "recipeId": 1  // é…æ–¹ID
}
```

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "ğŸ‰ ä»»åŠ¡å®Œæˆï¼è·å¾— 100 è´¡çŒ®åˆ†",
  "data": {
    "task_id": 1,
    "recipe_id": 1,
    "prize": 100,
    "user_contribute": 200
  }
}
```

---

## æ›´æ–°ä»»åŠ¡æ‚¬èµ

### PATCH /api/tasks/:id

æ›´æ–°ä»»åŠ¡æ‚¬èµï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰

#### è¯·æ±‚ä¿¡æ¯
- **æ–¹æ³•ï¼š** PATCH
- **è·¯å¾„ï¼š** `/api/tasks/:id`
- **è®¤è¯ï¼š** éœ€è¦ç®¡ç†å‘˜æƒé™
- **ç¤ºä¾‹é“¾æ¥ï¼š** [http://localhost:19198/api/tasks/1](http://localhost:19198/api/tasks/1)

#### è·¯å¾„å‚æ•°
- `id`: ä»»åŠ¡ID

#### è¯·æ±‚å‚æ•°
```json
{
  "prize": 100  // å¥–åŠ±åˆ†æ•°ï¼ˆ0-200ï¼‰
}
```

---

## åˆ é™¤ä»»åŠ¡

### DELETE /api/tasks/:id

åˆ é™¤ä»»åŠ¡ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰

#### è¯·æ±‚ä¿¡æ¯
- **æ–¹æ³•ï¼š** DELETE
- **è·¯å¾„ï¼š** `/api/tasks/:id`
- **è®¤è¯ï¼š** éœ€è¦ç®¡ç†å‘˜æƒé™
- **ç¤ºä¾‹é“¾æ¥ï¼š** [http://localhost:19198/api/tasks/1](http://localhost:19198/api/tasks/1)

#### è·¯å¾„å‚æ•°
- `id`: ä»»åŠ¡ID

---

## ä»»åŠ¡çŠ¶æ€è¯´æ˜

### ä»»åŠ¡çŠ¶æ€
- `active`: æ´»è·ƒä»»åŠ¡ï¼Œç­‰å¾…å®Œæˆ
- `completed`: å·²å®Œæˆä»»åŠ¡

### ä»»åŠ¡ç±»å‹
- `find_recipe`: å¯»æ‰¾é…æ–¹ï¼ˆç‰©å“æ— ä»»ä½•é…æ–¹æ—¶ï¼‰
- `find_more_recipes`: å¯»æ‰¾æ›´å¤šé…æ–¹ï¼ˆç‰©å“å·²æœ‰é…æ–¹ï¼Œé¼“åŠ±å‘ç°æ›´å¤šåˆæˆæ–¹å¼ï¼‰

### å¥–åŠ±æœºåˆ¶
- **æ™®é€šç”¨æˆ·**: åˆ›å»ºä»»åŠ¡æ—¶å¥–åŠ±è‡ªåŠ¨è®¾ä¸º0
- **ç®¡ç†å‘˜**: å¯è®¾ç½®0-200åˆ†çš„å¥–åŠ±
- **è‡ªåŠ¨å®Œæˆ**: ç”¨æˆ·æäº¤é…æ–¹åï¼Œç³»ç»Ÿè‡ªåŠ¨æ£€æŸ¥å¹¶å®Œæˆä»»åŠ¡
- **å…ˆåˆ°å…ˆå¾—**: åªæœ‰ç¬¬ä¸€ä¸ªå®ŒæˆéªŒè¯çš„é…æ–¹è·å¾—å¥–åŠ±

---

## ç›¸å…³æ–‡æ¡£

- [APIæ–‡æ¡£é¦–é¡µ](../README.md)
- [é€šç”¨ä¿¡æ¯](../common.md)
- [è®¤è¯è¯´æ˜](../common.md#è®¤è¯è¯´æ˜)
- [é”™è¯¯å¤„ç†](../common.md#é”™è¯¯å¤„ç†)
